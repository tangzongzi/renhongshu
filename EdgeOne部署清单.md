# âœ… EdgeOneéƒ¨ç½²æ¸…å•

## ğŸ“¦ ä»£ç å·²æ¨é€åˆ°GitHub
- âœ… ä»“åº“: https://github.com/tangzongzi/renhongshu.git
- âœ… åˆ†æ”¯: main
- âœ… æœ€æ–°æäº¤: å®Œå–„ç”Ÿäº§ç¯å¢ƒé…ç½®

---

## ğŸ”§ å·²å®Œå–„çš„é…ç½®

### 1. APIæ–‡ä»¶ç‹¬ç«‹æ€§ âœ…
- âœ… `api/parse-link.ts` - ä¸å†ä¾èµ–å‰ç«¯ä»£ç ï¼Œç‹¬ç«‹å®ç°é“¾æ¥è§£æ
- âœ… `api/scrape-content.ts` - ç‹¬ç«‹çš„å†…å®¹æŠ“å–é€»è¾‘
- âœ… `api/rewrite.ts` - ç‹¬ç«‹çš„AIæ”¹å†™é€»è¾‘

### 2. CORSè·¨åŸŸæ”¯æŒ âœ…
æ‰€æœ‰APIéƒ½å·²æ·»åŠ CORSå¤´ï¼š
```typescript
'Access-Control-Allow-Origin': '*'
'Access-Control-Allow-Methods': 'POST, OPTIONS'
'Access-Control-Allow-Headers': 'Content-Type'
```

### 3. ç¯å¢ƒå˜é‡é…ç½® âœ…
`.env` æ–‡ä»¶å·²é…ç½®ï¼š
```env
VITE_ZHIPU_API_KEY=5da539c561a24becb4d557372f20b7b9.xhDQrrOzEiXYlxQA
VITE_USE_REAL_API=true
VITE_API_BASE_URL=/api
```

### 4. EdgeOneé…ç½®æ–‡ä»¶ âœ…
`edgeone.json` å·²é…ç½®ï¼š
- âœ… æ„å»ºå‘½ä»¤: `npm run build`
- âœ… è¾“å‡ºç›®å½•: `dist`
- âœ… APIè·¯ç”±: `/api/*`
- âœ… å‡½æ•°è¿è¡Œæ—¶: `nodejs18.x`
- âœ… ç¯å¢ƒå˜é‡: `ZHIPU_API_KEY`

---

## ğŸš€ EdgeOneæ§åˆ¶å°éœ€è¦é…ç½®çš„å†…å®¹

### æ­¥éª¤1ï¼šè¿æ¥GitHubä»“åº“
1. ç™»å½•EdgeOneæ§åˆ¶å°: https://console.cloud.tencent.com/edgeone
2. é€‰æ‹©"ç«™ç‚¹" â†’ "åˆ›å»ºç«™ç‚¹"æˆ–é€‰æ‹©ç°æœ‰ç«™ç‚¹
3. è¿›å…¥"è¾¹ç¼˜å‡½æ•°" â†’ "è®¾ç½®"
4. è¿æ¥GitHubä»“åº“: `tangzongzi/renhongshu`
5. é€‰æ‹©åˆ†æ”¯: `main`
6. å¯ç”¨è‡ªåŠ¨éƒ¨ç½²

### æ­¥éª¤2ï¼šé…ç½®ç¯å¢ƒå˜é‡
åœ¨EdgeOneæ§åˆ¶å°é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```
ZHIPU_API_KEY=5da539c561a24becb4d557372f20b7b9.xhDQrrOzEiXYlxQA
```

**é‡è¦**: è¿™ä¸ªç¯å¢ƒå˜é‡ä¼šè¢«APIå‡½æ•°ä½¿ç”¨

### æ­¥éª¤3ï¼šé…ç½®æ„å»ºè®¾ç½®
- æ„å»ºå‘½ä»¤: `npm run build`
- è¾“å‡ºç›®å½•: `dist`
- Nodeç‰ˆæœ¬: 18.x

### æ­¥éª¤4ï¼šé…ç½®è·¯ç”±è§„åˆ™
EdgeOneä¼šè‡ªåŠ¨è¯†åˆ« `edgeone.json` ä¸­çš„è·¯ç”±é…ç½®ï¼š
- `/api/parse-link` â†’ `api/parse-link.ts`
- `/api/scrape-content` â†’ `api/scrape-content.ts`
- `/api/rewrite` â†’ `api/rewrite.ts`
- `/*` â†’ é™æ€æ–‡ä»¶ (dist/)

---

## ğŸ§ª éƒ¨ç½²åæµ‹è¯•

### 1. æµ‹è¯•é™æ€ç½‘ç«™
è®¿é—®ä½ çš„EdgeOneåŸŸåï¼Œä¾‹å¦‚ï¼š
```
https://your-domain.edgeone.app
```

åº”è¯¥çœ‹åˆ°å°çº¢ä¹¦è‡ªåŠ¨å‘å¸ƒå·¥å…·çš„ç•Œé¢

### 2. æµ‹è¯•APIç«¯ç‚¹

#### æµ‹è¯•é“¾æ¥è§£æ
```bash
curl -X POST https://your-domain.edgeone.app/api/parse-link \
  -H "Content-Type: application/json" \
  -d '{"url":"https://www.xiaohongshu.com/explore/abc123"}'
```

é¢„æœŸå“åº”ï¼š
```json
{
  "success": true,
  "data": {
    "postId": "abc123",
    "linkType": "standard",
    "originalUrl": "..."
  }
}
```

#### æµ‹è¯•å†…å®¹æŠ“å–
```bash
curl -X POST https://your-domain.edgeone.app/api/scrape-content \
  -H "Content-Type: application/json" \
  -d '{"postId":"6756c2a4000000001e03e2e0"}'
```

#### æµ‹è¯•AIæ”¹å†™
```bash
curl -X POST https://your-domain.edgeone.app/api/rewrite \
  -H "Content-Type": application/json" \
  -d '{"title":"æµ‹è¯•æ ‡é¢˜","content":"æµ‹è¯•å†…å®¹"}'
```

### 3. å®Œæ•´æµç¨‹æµ‹è¯•
1. æ‰“å¼€ç½‘ç«™
2. è¾“å…¥çœŸå®çš„å°çº¢ä¹¦é“¾æ¥
3. æŸ¥çœ‹æ˜¯å¦èƒ½æ­£ç¡®æŠ“å–å†…å®¹
4. ç‚¹å‡»AIæ”¹å†™
5. æŸ¥çœ‹æ”¹å†™ç»“æœ
6. æµ‹è¯•å›¾ç‰‡ä¸‹è½½
7. æµ‹è¯•å†…å®¹å¤åˆ¶

---

## âš ï¸ å¯èƒ½é‡åˆ°çš„é—®é¢˜

### é—®é¢˜1ï¼šAPIè¿”å›404
**åŸå› **: EdgeOne Functionsæœªæ­£ç¡®éƒ¨ç½²
**è§£å†³**: 
- æ£€æŸ¥EdgeOneæ§åˆ¶å°çš„éƒ¨ç½²æ—¥å¿—
- ç¡®è®¤ `api/` ç›®å½•å·²ä¸Šä¼ 
- æ£€æŸ¥è·¯ç”±é…ç½®

### é—®é¢˜2ï¼šCORSé”™è¯¯
**åŸå› **: CORSå¤´æœªç”Ÿæ•ˆ
**è§£å†³**: 
- å·²åœ¨ä»£ç ä¸­æ·»åŠ CORSå¤´
- å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œåœ¨EdgeOneæ§åˆ¶å°æ‰‹åŠ¨é…ç½®CORS

### é—®é¢˜3ï¼šç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ
**åŸå› **: ç¯å¢ƒå˜é‡æœªé…ç½®æˆ–åç§°ä¸åŒ¹é…
**è§£å†³**: 
- åœ¨EdgeOneæ§åˆ¶å°æ£€æŸ¥ç¯å¢ƒå˜é‡
- ç¡®è®¤å˜é‡åä¸º `ZHIPU_API_KEY`
- é‡æ–°éƒ¨ç½²

### é—®é¢˜4ï¼šå°çº¢ä¹¦æŠ“å–å¤±è´¥
**åŸå› **: 
- å°çº¢ä¹¦åçˆ¬è™«æœºåˆ¶
- é“¾æ¥æ ¼å¼å˜åŒ–
- ç½‘ç»œé—®é¢˜

**è§£å†³**: 
- æ£€æŸ¥EdgeOne Functionsçš„æ—¥å¿—
- å°è¯•ä¸åŒçš„å°çº¢ä¹¦é“¾æ¥
- å¯èƒ½éœ€è¦æ·»åŠ ä»£ç†æˆ–è°ƒæ•´è¯·æ±‚å¤´

### é—®é¢˜5ï¼šæ™ºè°±AIè°ƒç”¨å¤±è´¥
**åŸå› **: 
- API Keyæ— æ•ˆ
- è°ƒç”¨é¢‘ç‡é™åˆ¶
- ç½‘ç»œé—®é¢˜

**è§£å†³**: 
- æ£€æŸ¥API Keyæ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹æ™ºè°±AIæ§åˆ¶å°çš„è°ƒç”¨è®°å½•
- ä¼šè‡ªåŠ¨é™çº§åˆ°ç®€å•æ”¹å†™

---

## ğŸ“Š éƒ¨ç½²çŠ¶æ€æ£€æŸ¥

### å‰ç«¯éƒ¨ç½² âœ…
- [ ] é™æ€æ–‡ä»¶å·²ä¸Šä¼ 
- [ ] ç½‘ç«™å¯ä»¥è®¿é—®
- [ ] UIæ˜¾ç¤ºæ­£å¸¸
- [ ] å“åº”å¼å¸ƒå±€æ­£å¸¸

### APIéƒ¨ç½² âœ…
- [ ] parse-link APIå¯ç”¨
- [ ] scrape-content APIå¯ç”¨
- [ ] rewrite APIå¯ç”¨
- [ ] CORSæ­£å¸¸å·¥ä½œ

### åŠŸèƒ½æµ‹è¯• â³
- [ ] é“¾æ¥è§£æåŠŸèƒ½æ­£å¸¸
- [ ] å†…å®¹æŠ“å–åŠŸèƒ½æ­£å¸¸ï¼ˆçœŸå®æ•°æ®ï¼‰
- [ ] AIæ”¹å†™åŠŸèƒ½æ­£å¸¸ï¼ˆæ™ºè°±AIï¼‰
- [ ] å›¾ç‰‡ä¸‹è½½åŠŸèƒ½æ­£å¸¸
- [ ] å†å²è®°å½•åŠŸèƒ½æ­£å¸¸

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **åœ¨EdgeOneæ§åˆ¶å°å®Œæˆé…ç½®**
   - è¿æ¥GitHubä»“åº“
   - é…ç½®ç¯å¢ƒå˜é‡
   - å¯ç”¨è‡ªåŠ¨éƒ¨ç½²

2. **ç­‰å¾…è‡ªåŠ¨éƒ¨ç½²å®Œæˆ**
   - EdgeOneä¼šè‡ªåŠ¨æ‹‰å–ä»£ç 
   - è‡ªåŠ¨æ„å»º
   - è‡ªåŠ¨éƒ¨ç½²

3. **æµ‹è¯•æ‰€æœ‰åŠŸèƒ½**
   - ä½¿ç”¨çœŸå®çš„å°çº¢ä¹¦é“¾æ¥æµ‹è¯•
   - éªŒè¯AIæ”¹å†™æ•ˆæœ
   - æ£€æŸ¥å›¾ç‰‡ä¸‹è½½

4. **ç›‘æ§å’Œä¼˜åŒ–**
   - æŸ¥çœ‹EdgeOneæ—¥å¿—
   - ç›‘æ§APIè°ƒç”¨é‡
   - ä¼˜åŒ–æ€§èƒ½

---

## ğŸ“ è·å–å¸®åŠ©

### EdgeOneæ–‡æ¡£
- æ§åˆ¶å°: https://console.cloud.tencent.com/edgeone
- æ–‡æ¡£: https://cloud.tencent.com/document/product/1552

### æ™ºè°±AIæ–‡æ¡£
- æ§åˆ¶å°: https://open.bigmodel.cn/usercenter/apikeys
- æ–‡æ¡£: https://open.bigmodel.cn/dev/api

---

**å‡†å¤‡å¥½äº†ï¼ä»£ç å·²æ¨é€ï¼ŒEdgeOneä¼šè‡ªåŠ¨éƒ¨ç½²** ğŸš€

ç°åœ¨å»EdgeOneæ§åˆ¶å°é…ç½®GitHubè¿æ¥å’Œç¯å¢ƒå˜é‡å³å¯ï¼
